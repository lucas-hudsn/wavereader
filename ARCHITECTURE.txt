==============================================================================
                     wave~reader Architecture Diagram
                    Agentic Surf Forecasting Website
==============================================================================

------------------------------------------------------------------------------
                          USER INTERFACE LAYER
------------------------------------------------------------------------------

  Landing Page (/)              Browse Page (/browse)
  +------------------+          +------------------+
  |  wave~reader     |          | State Dropdown   |
  |                  |          | Break Dropdown   |
  | [:::] Browse     |--------->| Break Details    |
  | [~^~] Forecast   |          | - Description    |
  +------------------+          | - Coordinates    |
         |                      | - Wave Direction |
         |                      | - Bottom Type    |
         v                      | - Skill Level    |
  Forecast Page                 | - Ideal Wind     |
  (/forecast-chat)              | - Ideal Tide     |
  +------------------+          | - Ideal Swell    |
  | [Enter Beach]    |          +------------------+
  | [Get Forecast]   |
  |                  |
  | Results:         |
  | - Beach Info     |
  | - Weather Data   |
  | - 24hr Chart     |
  | - AI Forecast    |
  +------------------+

------------------------------------------------------------------------------
                          API LAYER (FastAPI)
------------------------------------------------------------------------------

  Page Routes:
  +------------------------------------------------------------------+
  | GET  /              -> Landing page (landing.html)               |
  | GET  /browse        -> Surf breaks browser (browse.html)         |
  | GET  /forecast-chat -> Forecast chatbot (chat.html)              |
  +------------------------------------------------------------------+

  Data APIs:
  +------------------------------------------------------------------+
  | GET  /api/states         -> List all states                      |
  | GET  /api/breaks/{state} -> List breaks for a state              |
  | GET  /api/break/{name}   -> Get break details from database      |
  | POST /forecast           -> Run LangGraph agent pipeline         |
  | GET  /health             -> Health check                         |
  +------------------------------------------------------------------+

------------------------------------------------------------------------------
                    DATABASE LAYER (PostgreSQL)
------------------------------------------------------------------------------

  surf_breaks table:
  +------------------------------------------------------------------+
  | id              | SERIAL PRIMARY KEY                             |
  | name            | VARCHAR(255) UNIQUE NOT NULL                   |
  | description     | TEXT                                           |
  | state           | VARCHAR(100)                                   |
  | latitude        | DECIMAL(10, 6)                                 |
  | longitude       | DECIMAL(10, 6)                                 |
  | wave_direction  | VARCHAR(20)  -- left / right                   |
  | bottom_type     | VARCHAR(20)  -- reef / sand                    |
  | break_type      | VARCHAR(20)  -- point / beach                  |
  | skill_level     | VARCHAR(20)  -- beginner / intermediate / adv  |
  | ideal_wind      | VARCHAR(255)                                   |
  | ideal_tide      | VARCHAR(255)                                   |
  | ideal_swell_size| VARCHAR(50)                                    |
  | created_at      | TIMESTAMP                                      |
  +------------------------------------------------------------------+

  Data: 50+ Australian surf breaks populated via one-shot prompting

------------------------------------------------------------------------------
                    AGENT ORCHESTRATION LAYER (LangGraph)
------------------------------------------------------------------------------

  SurfState (TypedDict):
  +------------------------------------------------------------------+
  | beach_name   : str                                               |
  | description  : str | None                                        |
  | coordinates  : dict | None  -- {latitude, longitude}             |
  | weather_data : dict | None  -- swell + wind data                 |
  | forecast     : str | None                                        |
  +------------------------------------------------------------------+

  StateGraph Pipeline:

  +---------------+    +---------------+    +---------------+
  | Description   |--->| Coordinates   |--->| Weather       |
  | Agent         |    | Agent         |    | Agent         |
  | (Gemini)      |    | (Gemini)      |    | (Open-Meteo)  |
  +---------------+    +---------------+    +---------------+
                                                   |
                                                   v
                                           +---------------+
                                           | Forecast      |
                                           | Agent         |
                                           | (Gemini)      |
                                           +---------------+
                                                   |
                                                   v
                                              JSON Response

------------------------------------------------------------------------------
                        EXTERNAL INTEGRATIONS
------------------------------------------------------------------------------

  +---------------------------+    +---------------------------+
  | Google Gemini API         |    | Open-Meteo API            |
  |                           |    |                           |
  | Model: gemini-2.5-pro     |    | Marine Forecasts          |
  | - Description generation  |    | - Wave heights            |
  | - Geolocation             |    | - Wave periods            |
  | - Forecast synthesis      |    | - Wind speed/direction    |
  |                           |    | - Hourly data             |
  | Auth: GEMINI_API_KEY      |    | Auth: None (free)         |
  +---------------------------+    +---------------------------+

------------------------------------------------------------------------------
                        DATA GENERATION LAYER
------------------------------------------------------------------------------

  data_gen/
  +------------------------------------------------------------------+
  | generate_bellsbeach_data_zeroshot.py                             |
  |   - Zero-shot prompting                                          |
  |   - Explicit field constraints                                   |
  |   - Single beach query                                           |
  +------------------------------------------------------------------+
  | generate_australia_surfbreaks_oneshot.py                         |
  |   - One-shot prompting with Bells Beach example                  |
  |   - Batch processing 50 breaks                                   |
  |   - PostgreSQL upsert logic                                      |
  +------------------------------------------------------------------+
  | PROMPTING.md                                                     |
  |   - Zero-shot principles                                         |
  |   - One-shot principles                                          |
  |   - Comparison and results                                       |
  +------------------------------------------------------------------+

------------------------------------------------------------------------------
                        PROJECT FILES HIERARCHY
------------------------------------------------------------------------------

wavereader/
|
+-- main.py                    FastAPI application + DB connection
|
+-- agents/
|   +-- __init__.py
|   +-- surf_graph.py          LangGraph StateGraph pipeline
|   +-- tools.py               Gemini calls + Open-Meteo API
|
+-- templates/
|   +-- landing.html           Landing page
|   +-- browse.html            Surf breaks browser
|   +-- chat.html              Forecast chatbot
|
+-- static/
|   +-- style.css              Retro monospace theme
|   +-- app.js                 Forecast page logic + Chart.js
|   +-- browse.js              Browse page dropdown logic
|
+-- data_gen/
|   +-- generate_bellsbeach_data_zeroshot.py
|   +-- generate_australia_surfbreaks_oneshot.py
|   +-- PROMPTING.md
|
+-- pyproject.toml             Dependencies
+-- README.md                  Documentation
+-- ARCHITECTURE.txt           This file

------------------------------------------------------------------------------
                         KEY METRICS
------------------------------------------------------------------------------

Dependencies:          7 (FastAPI, LangGraph, Gemini, psycopg2, etc.)
API Integrations:      2 (Google Gemini + Open-Meteo)
Agent Nodes:           4 (Description, Coordinates, Weather, Forecast)
Database Tables:       1 (surf_breaks)
Surf Breaks:           50+ Australian locations
Page Routes:           3 (Landing, Browse, Forecast)
API Endpoints:         5 (states, breaks, break, forecast, health)

==============================================================================
